<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Pml project har by amachno</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Pml project har</h1>
      <h2 class="project-tagline">This repository is made as a part of Practical Machine Learning course from coursera.</h2>
      <a href="https://github.com/amachno/PML_project_HAR" class="btn">View on GitHub</a>
      <a href="https://github.com/amachno/PML_project_HAR/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/amachno/PML_project_HAR/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>&lt;!DOCTYPE html&gt;</p>

<p></p>

<p></p>

<p>

</p>

<p></p>

<p></p>Human Activity Recognition



<p>
</p>







code{white-space: pre;}

<p></p>




  pre:not([class]) {
    background-color: white;
  }




<p></p>

<p></p>


.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}


<div>


<div id="header">
<h1>
<a id="human-activity-recognition" class="anchor" href="#human-activity-recognition" aria-hidden="true"><span class="octicon octicon-link"></span></a>Human Activity Recognition</h1>
<h4>
<a id="a-m-machno" class="anchor" href="#a-m-machno" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>A. M. Machno</em>
</h4>
</div>

<div id="introduction">
<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h2>
<p>This analysis is done as a part of “Practical Machine Learning” course which is part of the Data Science specialization offered by coursera and taught by great professors from John Hopkins Bloomberg School of Public Health. The goal of the project is to construct a prediction method for human activity.</p>
</div>

<div id="data">
<h2>
<a id="data" class="anchor" href="#data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data</h2>
<p>Let’s load the data and do some preprocessing. In order to replicate, make sure that you have data files in your working directory. I like to read data with all columns classes beind character. It is very easy to change class from character to any other and by default “read.csv” function sometimes reads numeric colums as factors or messes with it in some other way.</p>
<pre><code>data.train&lt;-read.csv("pml-training.csv", colClasses = 'character')
str(data.train)</code></pre>
<pre><code>## 'data.frame':    19622 obs. of  160 variables:
##  $ X                       : chr  "1" "2" "3" "4" ...
##  $ user_name               : chr  "carlitos" "carlitos" "carlitos" "carlitos" ...
##  $ raw_timestamp_part_1    : chr  "1323084231" "1323084231" "1323084231" "1323084232" ...
##  $ raw_timestamp_part_2    : chr  "788290" "808298" "820366" "120339" ...
##  $ cvtd_timestamp          : chr  "05/12/2011 11:23" "05/12/2011 11:23" "05/12/2011 11:23" "05/12/2011 11:23" ...
##  $ new_window              : chr  "no" "no" "no" "no" ...
##  $ num_window              : chr  "11" "11" "11" "12" ...
##  $ roll_belt               : chr  "1.41" "1.41" "1.42" "1.48" ...
##  $ pitch_belt              : chr  "8.07" "8.07" "8.07" "8.05" ...
##  $ yaw_belt                : chr  "-94.4" "-94.4" "-94.4" "-94.4" ...
##  $ total_accel_belt        : chr  "3" "3" "3" "3" ...
##  $ kurtosis_roll_belt      : chr  "" "" "" "" ...
##  $ kurtosis_picth_belt     : chr  "" "" "" "" ...
##  $ kurtosis_yaw_belt       : chr  "" "" "" "" ...
##  $ skewness_roll_belt      : chr  "" "" "" "" ...
##  $ skewness_roll_belt.1    : chr  "" "" "" "" ...
##  $ skewness_yaw_belt       : chr  "" "" "" "" ...
##  $ max_roll_belt           : chr  NA NA NA NA ...
##  $ max_picth_belt          : chr  NA NA NA NA ...
##  $ max_yaw_belt            : chr  "" "" "" "" ...
##  $ min_roll_belt           : chr  NA NA NA NA ...
##  $ min_pitch_belt          : chr  NA NA NA NA ...
##  $ min_yaw_belt            : chr  "" "" "" "" ...
##  $ amplitude_roll_belt     : chr  NA NA NA NA ...
##  $ amplitude_pitch_belt    : chr  NA NA NA NA ...
##  $ amplitude_yaw_belt      : chr  "" "" "" "" ...
##  $ var_total_accel_belt    : chr  NA NA NA NA ...
##  $ avg_roll_belt           : chr  NA NA NA NA ...
##  $ stddev_roll_belt        : chr  NA NA NA NA ...
##  $ var_roll_belt           : chr  NA NA NA NA ...
##  $ avg_pitch_belt          : chr  NA NA NA NA ...
##  $ stddev_pitch_belt       : chr  NA NA NA NA ...
##  $ var_pitch_belt          : chr  NA NA NA NA ...
##  $ avg_yaw_belt            : chr  NA NA NA NA ...
##  $ stddev_yaw_belt         : chr  NA NA NA NA ...
##  $ var_yaw_belt            : chr  NA NA NA NA ...
##  $ gyros_belt_x            : chr  "0" "0.02" "0" "0.02" ...
##  $ gyros_belt_y            : chr  "0" "0" "0" "0" ...
##  $ gyros_belt_z            : chr  "-0.02" "-0.02" "-0.02" "-0.03" ...
##  $ accel_belt_x            : chr  "-21" "-22" "-20" "-22" ...
##  $ accel_belt_y            : chr  "4" "4" "5" "3" ...
##  $ accel_belt_z            : chr  "22" "22" "23" "21" ...
##  $ magnet_belt_x           : chr  "-3" "-7" "-2" "-6" ...
##  $ magnet_belt_y           : chr  "599" "608" "600" "604" ...
##  $ magnet_belt_z           : chr  "-313" "-311" "-305" "-310" ...
##  $ roll_arm                : chr  "-128" "-128" "-128" "-128" ...
##  $ pitch_arm               : chr  "22.5" "22.5" "22.5" "22.1" ...
##  $ yaw_arm                 : chr  "-161" "-161" "-161" "-161" ...
##  $ total_accel_arm         : chr  "34" "34" "34" "34" ...
##  $ var_accel_arm           : chr  NA NA NA NA ...
##  $ avg_roll_arm            : chr  NA NA NA NA ...
##  $ stddev_roll_arm         : chr  NA NA NA NA ...
##  $ var_roll_arm            : chr  NA NA NA NA ...
##  $ avg_pitch_arm           : chr  NA NA NA NA ...
##  $ stddev_pitch_arm        : chr  NA NA NA NA ...
##  $ var_pitch_arm           : chr  NA NA NA NA ...
##  $ avg_yaw_arm             : chr  NA NA NA NA ...
##  $ stddev_yaw_arm          : chr  NA NA NA NA ...
##  $ var_yaw_arm             : chr  NA NA NA NA ...
##  $ gyros_arm_x             : chr  "0" "0.02" "0.02" "0.02" ...
##  $ gyros_arm_y             : chr  "0" "-0.02" "-0.02" "-0.03" ...
##  $ gyros_arm_z             : chr  "-0.02" "-0.02" "-0.02" "0.02" ...
##  $ accel_arm_x             : chr  "-288" "-290" "-289" "-289" ...
##  $ accel_arm_y             : chr  "109" "110" "110" "111" ...
##  $ accel_arm_z             : chr  "-123" "-125" "-126" "-123" ...
##  $ magnet_arm_x            : chr  "-368" "-369" "-368" "-372" ...
##  $ magnet_arm_y            : chr  "337" "337" "344" "344" ...
##  $ magnet_arm_z            : chr  "516" "513" "513" "512" ...
##  $ kurtosis_roll_arm       : chr  "" "" "" "" ...
##  $ kurtosis_picth_arm      : chr  "" "" "" "" ...
##  $ kurtosis_yaw_arm        : chr  "" "" "" "" ...
##  $ skewness_roll_arm       : chr  "" "" "" "" ...
##  $ skewness_pitch_arm      : chr  "" "" "" "" ...
##  $ skewness_yaw_arm        : chr  "" "" "" "" ...
##  $ max_roll_arm            : chr  NA NA NA NA ...
##  $ max_picth_arm           : chr  NA NA NA NA ...
##  $ max_yaw_arm             : chr  NA NA NA NA ...
##  $ min_roll_arm            : chr  NA NA NA NA ...
##  $ min_pitch_arm           : chr  NA NA NA NA ...
##  $ min_yaw_arm             : chr  NA NA NA NA ...
##  $ amplitude_roll_arm      : chr  NA NA NA NA ...
##  $ amplitude_pitch_arm     : chr  NA NA NA NA ...
##  $ amplitude_yaw_arm       : chr  NA NA NA NA ...
##  $ roll_dumbbell           : chr  "13.05217456" "13.13073959" "12.85074981" "13.43119971" ...
##  $ pitch_dumbbell          : chr  "-70.49400371" "-70.63750507" "-70.27811982" "-70.39379464" ...
##  $ yaw_dumbbell            : chr  "-84.87393888" "-84.71064711" "-85.14078134" "-84.87362553" ...
##  $ kurtosis_roll_dumbbell  : chr  "" "" "" "" ...
##  $ kurtosis_picth_dumbbell : chr  "" "" "" "" ...
##  $ kurtosis_yaw_dumbbell   : chr  "" "" "" "" ...
##  $ skewness_roll_dumbbell  : chr  "" "" "" "" ...
##  $ skewness_pitch_dumbbell : chr  "" "" "" "" ...
##  $ skewness_yaw_dumbbell   : chr  "" "" "" "" ...
##  $ max_roll_dumbbell       : chr  NA NA NA NA ...
##  $ max_picth_dumbbell      : chr  NA NA NA NA ...
##  $ max_yaw_dumbbell        : chr  "" "" "" "" ...
##  $ min_roll_dumbbell       : chr  NA NA NA NA ...
##  $ min_pitch_dumbbell      : chr  NA NA NA NA ...
##  $ min_yaw_dumbbell        : chr  "" "" "" "" ...
##  $ amplitude_roll_dumbbell : chr  NA NA NA NA ...
##   [list output truncated]</code></pre>
<p>It seems that we have a lot of NAs and most of them are cumulated in the same colums, so we just remove those NA colums. Additionally, first seven variables won’t help with prediction, because they are strictly connected to objects not to the outcome.</p>
<pre><code>data.train&lt;-data.train[,-(1:7)]
for (i in 1:(length(data.train[1,])-1)){
      data.train[[i]]&lt;-as.numeric(data.train[[i]])
}</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>## Warning: pojawiły się wartości NA na skutek przekształcenia</code></pre>
<pre><code>data.train$classe&lt;-factor(data.train$classe)

#calculatinc number of NAs in colums
nasum&lt;-apply(data.train,2, function(x) sum(is.na(x)))
data.train&lt;-data.train[,nasum==0]

#Lets preprocess test data in the same way to avoid problems later
 data.test&lt;-read.csv("pml-testing.csv", colClasses = 'character')
data.test&lt;-data.test[,-(1:7)]
 for (i in 1:(length(data.test[1,])-1)){
       data.test[[i]]&lt;-as.numeric(data.test[[i]])
 }
 data.test&lt;-data.test[,nasum==0]</code></pre>
<p>Let’s see how the cleaned data looks like. I know that this is not very ellegant way to do the cleaning, but cleaning is not to look pretty, but to produce pretty dataset.</p>
<pre><code> str(data.train)</code></pre>
<pre><code>## 'data.frame':    19622 obs. of  53 variables:
##  $ roll_belt           : num  1.41 1.41 1.42 1.48 1.48 1.45 1.42 1.42 1.43 1.45 ...
##  $ pitch_belt          : num  8.07 8.07 8.07 8.05 8.07 8.06 8.09 8.13 8.16 8.17 ...
##  $ yaw_belt            : num  -94.4 -94.4 -94.4 -94.4 -94.4 -94.4 -94.4 -94.4 -94.4 -94.4 ...
##  $ total_accel_belt    : num  3 3 3 3 3 3 3 3 3 3 ...
##  $ gyros_belt_x        : num  0 0.02 0 0.02 0.02 0.02 0.02 0.02 0.02 0.03 ...
##  $ gyros_belt_y        : num  0 0 0 0 0.02 0 0 0 0 0 ...
##  $ gyros_belt_z        : num  -0.02 -0.02 -0.02 -0.03 -0.02 -0.02 -0.02 -0.02 -0.02 0 ...
##  $ accel_belt_x        : num  -21 -22 -20 -22 -21 -21 -22 -22 -20 -21 ...
##  $ accel_belt_y        : num  4 4 5 3 2 4 3 4 2 4 ...
##  $ accel_belt_z        : num  22 22 23 21 24 21 21 21 24 22 ...
##  $ magnet_belt_x       : num  -3 -7 -2 -6 -6 0 -4 -2 1 -3 ...
##  $ magnet_belt_y       : num  599 608 600 604 600 603 599 603 602 609 ...
##  $ magnet_belt_z       : num  -313 -311 -305 -310 -302 -312 -311 -313 -312 -308 ...
##  $ roll_arm            : num  -128 -128 -128 -128 -128 -128 -128 -128 -128 -128 ...
##  $ pitch_arm           : num  22.5 22.5 22.5 22.1 22.1 22 21.9 21.8 21.7 21.6 ...
##  $ yaw_arm             : num  -161 -161 -161 -161 -161 -161 -161 -161 -161 -161 ...
##  $ total_accel_arm     : num  34 34 34 34 34 34 34 34 34 34 ...
##  $ gyros_arm_x         : num  0 0.02 0.02 0.02 0 0.02 0 0.02 0.02 0.02 ...
##  $ gyros_arm_y         : num  0 -0.02 -0.02 -0.03 -0.03 -0.03 -0.03 -0.02 -0.03 -0.03 ...
##  $ gyros_arm_z         : num  -0.02 -0.02 -0.02 0.02 0 0 0 0 -0.02 -0.02 ...
##  $ accel_arm_x         : num  -288 -290 -289 -289 -289 -289 -289 -289 -288 -288 ...
##  $ accel_arm_y         : num  109 110 110 111 111 111 111 111 109 110 ...
##  $ accel_arm_z         : num  -123 -125 -126 -123 -123 -122 -125 -124 -122 -124 ...
##  $ magnet_arm_x        : num  -368 -369 -368 -372 -374 -369 -373 -372 -369 -376 ...
##  $ magnet_arm_y        : num  337 337 344 344 337 342 336 338 341 334 ...
##  $ magnet_arm_z        : num  516 513 513 512 506 513 509 510 518 516 ...
##  $ roll_dumbbell       : num  13.1 13.1 12.9 13.4 13.4 ...
##  $ pitch_dumbbell      : num  -70.5 -70.6 -70.3 -70.4 -70.4 ...
##  $ yaw_dumbbell        : num  -84.9 -84.7 -85.1 -84.9 -84.9 ...
##  $ total_accel_dumbbell: num  37 37 37 37 37 37 37 37 37 37 ...
##  $ gyros_dumbbell_x    : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ gyros_dumbbell_y    : num  -0.02 -0.02 -0.02 -0.02 -0.02 -0.02 -0.02 -0.02 -0.02 -0.02 ...
##  $ gyros_dumbbell_z    : num  0 0 0 -0.02 0 0 0 0 0 0 ...
##  $ accel_dumbbell_x    : num  -234 -233 -232 -232 -233 -234 -232 -234 -232 -235 ...
##  $ accel_dumbbell_y    : num  47 47 46 48 48 48 47 46 47 48 ...
##  $ accel_dumbbell_z    : num  -271 -269 -270 -269 -270 -269 -270 -272 -269 -270 ...
##  $ magnet_dumbbell_x   : num  -559 -555 -561 -552 -554 -558 -551 -555 -549 -558 ...
##  $ magnet_dumbbell_y   : num  293 296 298 303 292 294 295 300 292 291 ...
##  $ magnet_dumbbell_z   : num  -65 -64 -63 -60 -68 -66 -70 -74 -65 -69 ...
##  $ roll_forearm        : num  28.4 28.3 28.3 28.1 28 27.9 27.9 27.8 27.7 27.7 ...
##  $ pitch_forearm       : num  -63.9 -63.9 -63.9 -63.9 -63.9 -63.9 -63.9 -63.8 -63.8 -63.8 ...
##  $ yaw_forearm         : num  -153 -153 -152 -152 -152 -152 -152 -152 -152 -152 ...
##  $ total_accel_forearm : num  36 36 36 36 36 36 36 36 36 36 ...
##  $ gyros_forearm_x     : num  0.03 0.02 0.03 0.02 0.02 0.02 0.02 0.02 0.03 0.02 ...
##  $ gyros_forearm_y     : num  0 0 -0.02 -0.02 0 -0.02 0 -0.02 0 0 ...
##  $ gyros_forearm_z     : num  -0.02 -0.02 0 0 -0.02 -0.03 -0.02 0 -0.02 -0.02 ...
##  $ accel_forearm_x     : num  192 192 196 189 189 193 195 193 193 190 ...
##  $ accel_forearm_y     : num  203 203 204 206 206 203 205 205 204 205 ...
##  $ accel_forearm_z     : num  -215 -216 -213 -214 -214 -215 -215 -213 -214 -215 ...
##  $ magnet_forearm_x    : num  -17 -18 -18 -16 -17 -9 -18 -9 -16 -22 ...
##  $ magnet_forearm_y    : num  654 661 658 658 655 660 659 660 653 656 ...
##  $ magnet_forearm_z    : num  476 473 469 469 473 478 470 474 476 473 ...
##  $ classe              : Factor w/ 5 levels "A","B","C","D",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<pre><code> str(data.test)</code></pre>
<pre><code>## 'data.frame':    20 obs. of  53 variables:
##  $ roll_belt           : num  123 1.02 0.87 125 1.35 -5.92 1.2 0.43 0.93 114 ...
##  $ pitch_belt          : num  27 4.87 1.82 -41.6 3.33 1.59 4.44 4.15 6.72 22.4 ...
##  $ yaw_belt            : num  -4.75 -88.9 -88.5 162 -88.6 -87.7 -87.3 -88.5 -93.7 -13.1 ...
##  $ total_accel_belt    : num  20 4 5 17 3 4 4 4 4 18 ...
##  $ gyros_belt_x        : num  -0.5 -0.06 0.05 0.11 0.03 0.1 -0.06 -0.18 0.1 0.14 ...
##  $ gyros_belt_y        : num  -0.02 -0.02 0.02 0.11 0.02 0.05 0 -0.02 0 0.11 ...
##  $ gyros_belt_z        : num  -0.46 -0.07 0.03 -0.16 0 -0.13 0 -0.03 -0.02 -0.16 ...
##  $ accel_belt_x        : num  -38 -13 1 46 -8 -11 -14 -10 -15 -25 ...
##  $ accel_belt_y        : num  69 11 -1 45 4 -16 2 -2 1 63 ...
##  $ accel_belt_z        : num  -179 39 49 -156 27 38 35 42 32 -158 ...
##  $ magnet_belt_x       : num  -13 43 29 169 33 31 50 39 -6 10 ...
##  $ magnet_belt_y       : num  581 636 631 608 566 638 622 635 600 601 ...
##  $ magnet_belt_z       : num  -382 -309 -312 -304 -418 -291 -315 -305 -302 -330 ...
##  $ roll_arm            : num  40.7 0 0 -109 76.1 0 0 0 -137 -82.4 ...
##  $ pitch_arm           : num  -27.8 0 0 55 2.76 0 0 0 11.2 -63.8 ...
##  $ yaw_arm             : num  178 0 0 -142 102 0 0 0 -167 -75.3 ...
##  $ total_accel_arm     : num  10 38 44 25 29 14 15 22 34 32 ...
##  $ gyros_arm_x         : num  -1.65 -1.17 2.1 0.22 -1.96 0.02 2.36 -3.71 0.03 0.26 ...
##  $ gyros_arm_y         : num  0.48 0.85 -1.36 -0.51 0.79 0.05 -1.01 1.85 -0.02 -0.5 ...
##  $ gyros_arm_z         : num  -0.18 -0.43 1.13 0.92 -0.54 -0.07 0.89 -0.69 -0.02 0.79 ...
##  $ accel_arm_x         : num  16 -290 -341 -238 -197 -26 99 -98 -287 -301 ...
##  $ accel_arm_y         : num  38 215 245 -57 200 130 79 175 111 -42 ...
##  $ accel_arm_z         : num  93 -90 -87 6 -30 -19 -67 -78 -122 -80 ...
##  $ magnet_arm_x        : num  -326 -325 -264 -173 -170 396 702 535 -367 -420 ...
##  $ magnet_arm_y        : num  385 447 474 257 275 176 15 215 335 294 ...
##  $ magnet_arm_z        : num  481 434 413 633 617 516 217 385 520 493 ...
##  $ roll_dumbbell       : num  -17.7 54.5 57.1 43.1 -101.4 ...
##  $ pitch_dumbbell      : num  25 -53.7 -51.4 -30 -53.4 ...
##  $ yaw_dumbbell        : num  126.2 -75.5 -75.2 -103.3 -14.2 ...
##  $ total_accel_dumbbell: num  9 31 29 18 4 29 29 29 3 2 ...
##  $ gyros_dumbbell_x    : num  0.64 0.34 0.39 0.1 0.29 -0.59 0.34 0.37 0.03 0.42 ...
##  $ gyros_dumbbell_y    : num  0.06 0.05 0.14 -0.02 -0.47 0.8 0.16 0.14 -0.21 0.51 ...
##  $ gyros_dumbbell_z    : num  -0.61 -0.71 -0.34 0.05 -0.46 1.1 -0.23 -0.39 -0.21 -0.03 ...
##  $ accel_dumbbell_x    : num  21 -153 -141 -51 -18 -138 -145 -140 0 -7 ...
##  $ accel_dumbbell_y    : num  -15 155 155 72 -30 166 150 159 25 -20 ...
##  $ accel_dumbbell_z    : num  81 -205 -196 -148 -5 -186 -190 -191 9 7 ...
##  $ magnet_dumbbell_x   : num  523 -502 -506 -576 -424 -543 -484 -515 -519 -531 ...
##  $ magnet_dumbbell_y   : num  -528 388 349 238 252 262 354 350 348 321 ...
##  $ magnet_dumbbell_z   : num  -56 -36 41 53 312 96 97 53 -32 -164 ...
##  $ roll_forearm        : num  141 109 131 0 -176 150 155 -161 15.5 13.2 ...
##  $ pitch_forearm       : num  49.3 -17.6 -32.6 0 -2.16 1.46 34.5 43.6 -63.5 19.4 ...
##  $ yaw_forearm         : num  156 106 93 0 -47.9 89.7 152 -89.5 -139 -105 ...
##  $ total_accel_forearm : num  33 39 34 43 24 43 32 47 36 24 ...
##  $ gyros_forearm_x     : num  0.74 1.12 0.18 1.38 -0.75 -0.88 -0.53 0.63 0.03 0.02 ...
##  $ gyros_forearm_y     : num  -3.34 -2.78 -0.79 0.69 3.1 4.26 1.8 -0.74 0.02 0.13 ...
##  $ gyros_forearm_z     : num  -0.59 -0.18 0.28 1.8 0.8 1.35 0.75 0.49 -0.02 -0.07 ...
##  $ accel_forearm_x     : num  -110 212 154 -92 131 230 -192 -151 195 -212 ...
##  $ accel_forearm_y     : num  267 297 271 406 -93 322 170 -331 204 98 ...
##  $ accel_forearm_z     : num  -149 -118 -129 -39 172 -144 -175 -282 -217 -7 ...
##  $ magnet_forearm_x    : num  -714 -237 -51 -233 375 -300 -678 -109 0 -403 ...
##  $ magnet_forearm_y    : num  419 791 698 783 -787 800 284 -619 652 723 ...
##  $ magnet_forearm_z    : num  617 873 783 521 91 884 585 -32 469 512 ...
##  $ problem_id          : chr  "1" "2" "3" "4" ...</code></pre>
<p>In my opinion the data sets look decent, all is in order, column classes are proper and it seems that all variables are relevant.</p>
</div>

<div id="prediction">
<h2>
<a id="prediction" class="anchor" href="#prediction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prediction</h2>
<p>My personal goal is to score 19/20 for the test data prediction which I am supposed to submit.</p>
<pre><code> pbinom(18.5,20,.98, lower.tail = F)</code></pre>
<pre><code>## [1] 0.940101</code></pre>
<p>I turns out that if I would have 98% accuracy, I will score 19 or 20 with probability 94%. Firstly, let’s split the data into training and testing in order to do some validation.</p>
<pre><code>library(caret)</code></pre>
<pre><code>## Warning: package 'caret' was built under R version 3.2.2</code></pre>
<pre><code>## Loading required package: lattice
## Loading required package: ggplot2</code></pre>
<pre><code>library(kernlab)</code></pre>
<pre><code>## Warning: package 'kernlab' was built under R version 3.2.2</code></pre>
<pre><code>## Warning in .recacheSubclasses(def@className, def, doSubclasses, env):
## undefined subclass "externalRefMethod" of class "kfunction"; definition not
## updated</code></pre>
<pre><code>set.seed(11)
inTrain&lt;-createDataPartition(y=data.train$classe, p=0.6, list=FALSE)
training&lt;-data.train[inTrain,]
testing&lt;-data.train[-inTrain,]</code></pre>
<p>I have tried Random Forests, Linear Discriminant Analysis, Quadratic Discriminant Analysis, Classification Trees, some boosting and bagging. It turned out that Random Forests are absolutely the best in the collection of methods I tried. By the best, I mean, that trained model predicts the testing set most accurately. And by testing set and training sets, I mean the parts of the original training data, not the testing data for which I don’t know the outcome. Let’s then perform prediction using Random Trees.</p>
<p>Firslty, let’s train the model.</p>
<pre><code>modelFit&lt;-train(classe~.,method="rf",
                trControl=trainControl(method="cv",number=3), data=training)</code></pre>
<pre><code>## Loading required package: randomForest</code></pre>
<pre><code>## Warning: package 'randomForest' was built under R version 3.2.2</code></pre>
<pre><code>## randomForest 4.6-10
## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<p>And validate it on the testing set.</p>
<pre><code>confusionMatrix(testing$classe,predict(modelFit,testing))</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    A    B    C    D    E
##          A 2228    3    0    0    1
##          B   13 1503    2    0    0
##          C    0   18 1344    6    0
##          D    0    0   21 1264    1
##          E    0    0    4   11 1427
## 
## Overall Statistics
##                                           
##                Accuracy : 0.9898          
##                  95% CI : (0.9873, 0.9919)
##     No Information Rate : 0.2856          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.9871          
##  Mcnemar's Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: A Class: B Class: C Class: D Class: E
## Sensitivity            0.9942   0.9862   0.9803   0.9867   0.9986
## Specificity            0.9993   0.9976   0.9963   0.9966   0.9977
## Pos Pred Value         0.9982   0.9901   0.9825   0.9829   0.9896
## Neg Pred Value         0.9977   0.9967   0.9958   0.9974   0.9997
## Prevalence             0.2856   0.1942   0.1747   0.1633   0.1821
## Detection Rate         0.2840   0.1916   0.1713   0.1611   0.1819
## Detection Prevalence   0.2845   0.1935   0.1744   0.1639   0.1838
## Balanced Accuracy      0.9967   0.9919   0.9883   0.9917   0.9981</code></pre>
<p>I am satisfied with the accuracy. Sensitivity for every class is greater than 98% and specificity is even higher. Thus, there is no class for which we have obvious problem. Let’s predict the values for the testing data (this for which we do not know the outcome). Firstly, we re-train the Random Forest model for all available data. Note that during the training we have used cross validation already, I have chosen only 2 folds, just because the computations are quite heavy and I am satisfied with the results.</p>
<pre><code>finalModel&lt;-train(classe~.,method="rf",
                  trControl=trainControl(method="cv",number=2), data=data.train)
answers&lt;-predict(finalModel,data.test)</code></pre>
<p>It appeared that all answers were correct.</p>
</div>

<div id="conclusions">
<h2>
<a id="conclusions" class="anchor" href="#conclusions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conclusions</h2>
<p>The prediction for Human Activity Recognition was succesful. However, I am sure that the accuracy is still improveable. The hint for this is that there is some pattersn in confision matrix. The A activity is being confused with B, however, B is not being confused with A that often, a similar result is visible for activities B and C. If the model prediction is proper, one would expect that proportions of reverse misclassifications should be similar.</p>
</div>

<div id="references">
<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h2>
<p>Velloso, E.; Bulling, A.; Gellersen, H.; Ugulino, W.; Fuks, H. Qualitative Activity Recognition of Weight Lifting Exercises. Proceedings of 4th International Conference in Cooperation with SIGCHI (Augmented Human ’13) . Stuttgart, Germany: ACM SIGCHI, 2013.</p>
<p>Read more: <a href="http://groupware.les.inf.puc-rio.br/">http://groupware.les.inf.puc-rio.br/</a></p>
</div>

<p></p>
</div>







<p>
</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/amachno/PML_project_HAR">Pml project har</a> is maintained by <a href="https://github.com/amachno">amachno</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
